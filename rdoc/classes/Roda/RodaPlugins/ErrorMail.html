<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Roda::RodaPlugins::ErrorMail</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      function popupCode(url) {
        window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
      }
      
      function toggleCode(id) {
        var code = document.getElementById(id)
      
        code.style.display = code.style.display != 'block' ? 'block' : 'none'
        return true
      }
      
      // Make codeblocks hidden by default
      document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>module</span>
          Roda::RodaPlugins::ErrorMail
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/lib/roda/plugins/error_mail_rb.html">lib/roda/plugins/error_mail.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>The error_mail plugin adds an <code>error_mail</code> instance method that
            send an email related to the exception.  This is most useful if you are
            also using the error_handler plugin:</p>
            
            <pre class="ruby"><span class="ruby-identifier">plugin</span> :<span class="ruby-identifier">error_mail</span>, <span class="ruby-identifier">to</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;to@example.com&#39;</span>, <span class="ruby-identifier">from</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;from@example.com&#39;</span>&#x000A;<span class="ruby-identifier">plugin</span> :<span class="ruby-identifier">error_handler</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">error_mail</span>(<span class="ruby-identifier">e</span>)&#x000A;  <span class="ruby-string">&#39;Internal Server Error&#39;</span>&#x000A;<span class="ruby-keyword">end</span></pre>
            
            <p>It is similar to the error_email plugin, except that it uses the mail
            library instead of net/smtp directly.  If you are already using the mail
            library in your application, it makes sense to use error_mail instead of
            error_email.</p>
            
            <p>Options:</p>
            <table class="rdoc-list note-list"><tbody><tr><td class='label'>:from </td><td>
            <p>The From address to use in the email (required)</p>
            </td></tr><tr><td class='label'>:headers </td><td>
            <p>A hash of additional headers to use in the email (default: empty hash)</p>
            </td></tr><tr><td class='label'>:prefix </td><td>
            <p>A prefix to use in the email&#39;s subject line (default: no prefix)</p>
            </td></tr><tr><td class='label'>:to </td><td>
            <p>The To address to use in the email (required)</p>
            </td></tr></tbody></table>
            
            <p>The subject of the error email shows the exception class and message. The
            body of the error email shows the backtrace of the error and the request
            environment, as well the request params and session variables (if any). You
            can also call error_mail with a plain string instead of an exception, in
            which case the string is used as the subject, and no backtrace is included.</p>
            
            <p>Note that emailing on every error as shown above is only appropriate for
            low traffic web applications.  For high traffic web applications, use an
            error reporting service instead of this plugin.</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a href="#method-c-configure">configure</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='class-list'>
            <h2>Classes and Modules</h2>
            <ol>
              <li><a href="ErrorMail/InstanceMethods.html">Roda::RodaPlugins::ErrorMail::InstanceMethods</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-configure'>
                <a name='method-c-configure'></a>
                <div class='synopsis'>
                  <span class='name'>configure</span>
                  <span class='arguments'>(app, opts=OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Set default opts for plugin.  See <a href="ErrorEmail.html">ErrorEmail</a>
                  module RDoc for options.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-configure-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-configure-source'><span class="ruby-comment"># File lib/roda/plugins/error_mail.rb, line 39</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">configure</span>(<span class="ruby-identifier">app</span>, <span class="ruby-identifier">opts</span>=<span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:error_mail</span>] = <span class="ruby-identifier">email_opts</span> = (<span class="ruby-identifier">app</span>.<span class="ruby-identifier">opts</span>[<span class="ruby-value">:error_mail</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">OPTS</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>).<span class="ruby-identifier">freeze</span>&#x000A;  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">email_opts</span>[<span class="ruby-value">:to</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">email_opts</span>[<span class="ruby-value">:from</span>]&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">RodaError</span>, <span class="ruby-string">&quot;must provide :to and :from options to error_mail plugin&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="https://github.com/rdoc/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
    </div>
  </body>
</html>
